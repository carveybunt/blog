---
title: init 初始化
date: 2020-11-18 17:43:57
permalink: /fantastic/init/
categories: 
  - fantastic
tags: null
author: 
  name: 诚城
  link: https://www.carveybunt.cn/user/profile/
titleTag: 原创
---

由于框架有使用到 `simple-git-hooks` 这个依赖包，所以请确保在安装依赖前，已经使用 `git init` 对项目进行过 `git` 环境初始化，如果你在安装依赖后再初始化了 `git` 环境，请在 `git` 环境初始化之后再执行一遍 `pnpm install` 安装命令。

```sh
git init
pnpm install
```

## 报错

```sh
sh: simple-git-hooks: command not found

 ELIFECYCLE  Command failed.
```

在执行一次 `pnpm install`。

::: danger

安装依赖时提示 `404` ，或者安装结束后，运行时提示「 'vite' 不是内部或外部命令，也不是可运行的程序或批处理文件 」，都些都是依赖未安装成功导致的。可以尝试执行 `pnpm config set registry https://registry.npmmirror.com/` 切换为国内 `npmmirror` 源（也可以使用 `nrm` 一键切换源），然后删除根目录下 `/node_modules` 文件夹并重新安装依赖。

如果依旧无法运行（基本不太可能），可尝试删除根目录下 `/node_modules` 文件夹与 `pnpm-lock.yaml` 文件后，再删除 `package.json` 中 "preinstall": "npx only-allow pnpm" 这句脚本，最后使用 `npm / yarn` 进行安装依赖。但需要清楚一点，这样操作后，将无法与官方环境锁定的依赖包版本保持一致，可能会出现无法预知的问题，非必要情况下，请勿使用该方案。

:::

## eslint

`ESlint` 与 `Prettier` 可能会冲突，故需做如下设置：
//1. 安装 `eslint-config-prettier` 插件
`npm i -D eslint-config-prettier`
//2. 在eslint的配置文件中写入以下内容
 extends: ['plugin:prettier/recommended'], // 避免与 `prettier` 冲突

`.eslintrc` 文件下添加代码：

```json
{
  "extends": ["@antfu", "plugin:prettier/recommended"],
  "plugins": ["prettier"],
  "rules": {
    "curly": ["error", "all"],
    "prettier/prettier": ["error"],
    "indent": ["error", 2, { "SwitchCase": 1 }], // 强制缩进 2； switch 缩进报错处理
    "eqeqeq": [2, "always"], // 要求使用 === 和 !==
    "semi": [2, "never"], // 要求或禁止使用分号代替 ASI
    "quotes": [0, "single"], // 强制使用一致的反勾号、双引号或单引号
    "vue/component-tags-order": [
      "error",
      {
        "order": ["route", "i18n", "script", "template", "style"]
      }
    ]
  }
}

```

## perttier

格式化代码插件(vscode) `Prettier - Code formatter`

`.prettierrc.js`

```js
module.exports = {
  printWidth: 120, //单行长度
  tabWidth: 2, //缩进长度
  useTabs: false, //使用空格代替tab缩进
  semi: false, //句末使用分号
  singleQuote: true, //使用单引号
  quoteProps: 'as-needed', //仅在必需时为对象的key添加引号
  jsxSingleQuote: true, // jsx中使用单引号
  trailingComma: 'all', //多行时尽可能打印尾随逗号
  bracketSpacing: true, //在对象前后添加空格-eg: { foo: bar }
  jsxBracketSameLine: true, //多属性html标签的‘>’折行放置
  arrowParens: 'always', //单参数箭头函数参数周围使用圆括号-eg: (x) => x
  requirePragma: false, //无需顶部注释即可格式化
  insertPragma: false, //在已被preitter格式化的文件顶部加上标注
  proseWrap: 'preserve', //不知道怎么翻译
  htmlWhitespaceSensitivity: 'ignore', //对HTML全局空白不敏感
  vueIndentScriptAndStyle: false, //不对vue中的script及style标签缩进
  endOfLine: 'lf', //结束行形式
  embeddedLanguageFormatting: 'auto', //对引用代码进行格式化
};

```

## settings

`src/settings.default.ts` 文件中修改相应全局设置代码：

### 全局设置

在应用 `src/settings.default.ts` 配置中设置：

```ts
const globalSettings: Settings.all = {
    menu: {
        subMenuOnlyOneHide: true, // 次导航只有一个时自动隐藏
        enableSubMenuCollapseButton: true, // 开启侧边 次导航 收起与展开
    },
    topbar: {
    mode: "fixed", // static 默认，静止，跟随页面滚动;fixed 固定，不跟随页面滚动，始终固定在顶部;sticky 粘性，页面往下滚动时隐藏，往上滚动时显示
    switchTabbarAndToolbar: true,
    },
  toolbar: {
    //  工具栏
        enableNotification: true, //  通知中心
        enableI18n: true, //  国际化
        enableFullscreen: false, // 全屏切换
        enablePageReload: false, // 重新加载
        enableColorScheme: false, // 颜色主题
        enableAppSetting: true, // 设置
    },
    breadcrumb: {
    // 面包屑
        enable: true,
        style: 'modern', // 面包屑样式 null ||  modern
        enableMainMenu: false,
    },
    copyright: {
      // 版权与备案信息
      enable: true,
      dates: "2023-2024",
      company: "vipnol",
      website: "https://vipnol.com",
      beian: "黔备-123456789",
    },
    
}
```
