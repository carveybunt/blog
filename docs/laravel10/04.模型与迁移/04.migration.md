---
title: migration 迁移
date: 2022-06-14 21:39:02
permalink: /backend/frame/laravel/model/migration/
titleTag: 原创
categories: 
  - 后端
  - 框架
  - laravel
tags: 
  - null
author: 
  name: 诚城
  link: https://github.com/carveybunt
---

## 生成迁移文件

```sh
php artisan make:migration create_flights_table

```

## reset 重设

```sh
php artisan migrate:reset
```

## rollback 回退

```sh
php artisan migrate:rollback
php artisan migrate:rollback --step=5
php artisan migrate:rollback --batch=3

```

## refresh 重建

```sh

php artisan migrate:refresh
 
# Refresh the database and run all database seeds...
php artisan migrate:refresh --seed

```

## 字段类型

### 外键

```php
$table->foreignId('user_id');
$table->foreignIdFor(User::class);
$table->foreignUuid('user_id');
$table->foreignUlid('user_id');
```

`foreignId()` The foreignId method creates an UNSIGNED BIGINT equivalent column:

`foreignIdFor()` The foreignIdFor method adds a {column}_id UNSIGNED BIGINT equivalent column for a given model class:

### tinyInteger

`tinyint` 占用`1字节`,1字节占用8位，经过换算(2的8次方减1)就是 `0~255`;

```php
$table->tinyInteger('sort')->default(10);
```

### unsignedTinyInteger

加上 `unsigned` 属性后就是`无符号`(范围是0~255的整数,因为是整数,不会有符号"-",所以就是无符号)。

```php
$table->unsignedTinyInteger('sort')->default(10);
```

### 枚举

```php
$table->enum('type', ['1', '2'])->default('1');
```
