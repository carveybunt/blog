---
title: query 查询
date: 2023-03-13 21:39:02
permalink: /laravel/model/query/
titleTag: 原创
categories: 
  - laravel
tags: 
  - null
author: 
  name: 诚城
  link: https://github.com/carveybunt
---

## DB

```php
use Illuminate\Support\Facades\DB;
```

### 连接查询

```php
$userId = Auth('api')->user()->id;
$limit = $request->get('limit');
$curPage = $request->get('page');

$arr = DB::table('organizations')
    ->leftJoin('user_organizations', 'organizations.id', '=', 'user_organizations.organization_id') // 左连接
    ->rightJoin('users', 'users.id', '=', 'user_organizations.user_id') // 右连接
    ->where('users.id', $userId) // 查询条件
    ->select(
        'organizations.id', 'organizations.title', 'organizations.summary', 'organizations.logo', 'organizations.abbreviation', 'organizations.address', 'organizations.type', 'organizations.status', 'organizations.sort',
    ) // 选择显示的字段
    ->orderBy('organizations.sort', 'desc') // 设置排序
    ->paginate($limit, ['*'], 'page', $curPage); // 分页设置

$data['data'] = $arr->items();
$data['total'] = $arr->total();
$data['currentPage'] = $arr->currentPage();

return successResData($data);
```

[MySQL 连接查询说明](../../MySQL/02.query.md#连接)
