---
title: 常用默认规则
date: 2023-03-13 21:39:02
permalink: /backend/frame/laravel/request/rule/default/
titleTag: 原创
categories: 
  - 后端
  - 框架
  - laravel
tags: 
  - null
author: 
  name: 诚城
  link: https://github.com/carveybunt
---

## unique

唯一值。

```php
public function rules()
    {
        switch($this->method()) {
            case 'POST': //资源路由的  store
                return [
                    'name' => ['bail','required','string',
                        Rule::unique('subject_categories')->where(function ($query) {
                            return $query->where('category_id', request('category_id'));
                        }), //  通过传入的 category_id 进行本表的唯一值确定
                    ],
                    'category_id' => ['bail','required','uuid',
                        'exists:subject_categories,id' // 必须存在于 subject_categories 表中的 id
                    ],

                ];
                break;
            case 'PUT'://资源路由的  PATCH，只更新提交字段的内容   PUT 必须提交所有的字段
                return [
                    'name' => ['bail','required','string','max:32',Rule::unique('organizations')->ignore(request('id'))],
//                    'type_id' => ['bail','required','uuid','exists:types,id'],
                ];
                break;
            default:
                break;
        }
    }
    public function messages()
    {
        return [
            'required' => '请输入 :attribute ',
            'unique' => ':attribute 已存在',
            'max' => '该:attribute超过:max',
            'between' => '该:attribute长度为:min至:max',
        ];
    }
    //使用语言包后，那些不会翻译的英语内容，在这定义
    public function attributes()
    {
        return [
            'type_id' => '类型',
        ];
    }
```
